{"ast":null,"code":"var _LoginComponent;\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"@angular/router\";\nfunction LoginComponent_ion_text_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-text\", 8);\n    i0.ɵɵtext(1, \" Please enter a valid email. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_ion_text_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-text\", 8);\n    i0.ɵɵtext(1, \" Password must be at least 6 characters. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_ion_text_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-text\", 8);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorMessage, \" \");\n  }\n}\nexport class LoginComponent {\n  constructor(fb, authService, router) {\n    this.fb = fb;\n    this.authService = authService;\n    this.router = router;\n    this.errorMessage = '';\n    this.loginForm = this.fb.group({\n      email: ['', [Validators.required, Validators.email]],\n      password: ['', [Validators.required, Validators.minLength(6)]]\n    });\n  }\n  onSubmit() {\n    if (this.loginForm.valid) {\n      const {\n        email,\n        password\n      } = this.loginForm.value;\n      this.authService.login(email, password).subscribe({\n        next: response => {\n          // Store token in localStorage\n          localStorage.setItem('auth_token', response.token);\n          this.router.navigate(['/accueil']);\n        },\n        error: error => {\n          this.errorMessage = 'Invalid email or password.';\n          console.error('Login error', error);\n        }\n      });\n    }\n  }\n}\n_LoginComponent = LoginComponent;\n_LoginComponent.ɵfac = function LoginComponent_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || _LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router));\n};\n_LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 19,\n  vars: 5,\n  consts: [[\"color\", \"primary\"], [1, \"ion-padding\"], [3, \"ngSubmit\", \"formGroup\"], [\"position\", \"floating\"], [\"type\", \"email\", \"formControlName\", \"email\"], [\"color\", \"danger\", 4, \"ngIf\"], [\"type\", \"password\", \"formControlName\", \"password\"], [\"expand\", \"full\", \"type\", \"submit\", 3, \"disabled\"], [\"color\", \"danger\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\", 0)(2, \"ion-title\");\n      i0.ɵɵtext(3, \"Login\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(4, \"ion-content\", 1)(5, \"form\", 2);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_5_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(6, \"ion-item\")(7, \"ion-label\", 3);\n      i0.ɵɵtext(8, \"Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(9, \"ion-input\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(10, LoginComponent_ion_text_10_Template, 2, 0, \"ion-text\", 5);\n      i0.ɵɵelementStart(11, \"ion-item\")(12, \"ion-label\", 3);\n      i0.ɵɵtext(13, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(14, \"ion-input\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(15, LoginComponent_ion_text_15_Template, 2, 0, \"ion-text\", 5)(16, LoginComponent_ion_text_16_Template, 2, 1, \"ion-text\", 5);\n      i0.ɵɵelementStart(17, \"ion-button\", 7);\n      i0.ɵɵtext(18, \"Login\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      let tmp_1_0;\n      let tmp_2_0;\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx.loginForm.get(\"email\")) == null ? null : tmp_1_0.invalid) && ((tmp_1_0 = ctx.loginForm.get(\"email\")) == null ? null : tmp_1_0.touched));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.loginForm.get(\"password\")) == null ? null : tmp_2_0.invalid) && ((tmp_2_0 = ctx.loginForm.get(\"password\")) == null ? null : tmp_2_0.touched));\n      i0.ɵɵadvance();\n      i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n      i0.ɵɵadvance();\n      i0.ɵɵproperty(\"disabled\", ctx.loginForm.invalid);\n    }\n  },\n  styles: [\"\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvbG9naW4vbG9naW4uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsK0NBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBSZW1vdmUgdGhpcyBmaWxlIGFzIGl0J3Mgbm8gbG9uZ2VyIG5lZWRlZC4gKi8iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"names":["Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","errorMessage","LoginComponent","constructor","fb","authService","router","loginForm","group","email","required","password","minLength","onSubmit","valid","value","login","subscribe","next","response","localStorage","setItem","token","navigate","error","console","ɵɵdirectiveInject","i1","FormBuilder","i2","AuthService","i3","Router","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵlistener","LoginComponent_Template_form_ngSubmit_5_listener","ɵɵelement","ɵɵtemplate","LoginComponent_ion_text_10_Template","LoginComponent_ion_text_15_Template","LoginComponent_ion_text_16_Template","ɵɵproperty","tmp_1_0","get","invalid","touched","tmp_2_0"],"sources":["C:\\Users\\TaherCh\\Desktop\\STB\\stb-bank-app\\src\\app\\pages\\login\\login.component.ts","C:\\Users\\TaherCh\\Desktop\\STB\\stb-bank-app\\src\\app\\pages\\login\\login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { AuthService } from '../../services/auth.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss'],\r\n})\r\nexport class LoginComponent {\r\n  loginForm: FormGroup;\r\n  errorMessage: string = '';\r\n\r\n  constructor(private fb: FormBuilder, private authService: AuthService, private router: Router) {\r\n    this.loginForm = this.fb.group({\r\n      email: ['', [Validators.required, Validators.email]],\r\n      password: ['', [Validators.required, Validators.minLength(6)]],\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    if (this.loginForm.valid) {\r\n      const { email, password } = this.loginForm.value;\r\n      this.authService.login(email, password).subscribe({\r\n        next: (response) => {\r\n          // Store token in localStorage\r\n          localStorage.setItem('auth_token', response.token);\r\n          this.router.navigate(['/accueil']);\r\n        },\r\n        error: (error) => {\r\n          this.errorMessage = 'Invalid email or password.';\r\n          console.error('Login error', error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n}","<ion-header>\r\n  <ion-toolbar color=\"primary\">\r\n    <ion-title>Login</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"ion-padding\">\r\n  <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\">\r\n    <ion-item>\r\n      <ion-label position=\"floating\">Email</ion-label>\r\n      <ion-input type=\"email\" formControlName=\"email\"></ion-input>\r\n    </ion-item>\r\n    <ion-text color=\"danger\" *ngIf=\"loginForm.get('email')?.invalid && loginForm.get('email')?.touched\">\r\n      Please enter a valid email.\r\n    </ion-text>\r\n\r\n    <ion-item>\r\n      <ion-label position=\"floating\">Password</ion-label>\r\n      <ion-input type=\"password\" formControlName=\"password\"></ion-input>\r\n    </ion-item>\r\n    <ion-text color=\"danger\" *ngIf=\"loginForm.get('password')?.invalid && loginForm.get('password')?.touched\">\r\n      Password must be at least 6 characters.\r\n    </ion-text>\r\n\r\n    <ion-text color=\"danger\" *ngIf=\"errorMessage\">\r\n      {{ errorMessage }}\r\n    </ion-text>\r\n\r\n    <ion-button expand=\"full\" type=\"submit\" [disabled]=\"loginForm.invalid\">Login</ion-button>\r\n  </form>\r\n</ion-content>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}